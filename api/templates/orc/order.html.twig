{% extends 'content.html.twig' %}

{% block content %}


    {% if app.user is null %}

    <div class="notification notification--error">
        <div class="notification__content">
            <div class="notification__type">ERROR</div>
            <h2 class="notification__title">{{ 'u must be logged in to visit this page'|trans|capitalize }}</h2>
        </div>
    </div>

{% else %}

    <style>
        .custom-ul {
            list-style-type: none;
            margin-left: 0;
        }

        .custom-li {
            min-height: 50px;
            border: 1px solid lightgrey;
            padding: 15px;
        }

        .custom-li-name {
            font-size: 30px;
            font-weight: bold;
            display: block;
        }

        .custom-li-head {
            max-width: 50%;
            display: inline-block;
        }

        .quantity-buttons {
            display: inline-block;
            text-align: right;
            float: right;
        }
    </style>

<div class="content-background">
    <div class="content">

        {% if order is defined and order is not empty %}

        <h1>{{ 'your'|trans|capitalize~' '~'order'|trans }}</h1>

        <ul class="custom-ul">
            {% for item in order.items %}
                <li class="custom-li">
                    <div class="custom-li-head">
                        <span class="custom-li-name">{{ item.name }}</span>
                        {% if item.description is defined %}
                            <span class="custom-li-des">{{ item.description }}</span>
                        {% endif %}
                    </div>
                    <div class="quantity-buttons">
                        <button id="decQuan">-</button>
                        <span id="quan">{{ item.quantity }}</span>
                        <button id="incQuan">+</button>
                    </div>
                </li>
            {% endfor %}

        </ul>

        <form action="#" method="post">
            {% for item in order.items %}
            <input type="hidden" name="items[quantity]" value="{{ item.quantity }}">
            {% endfor %}

            <button class="btn btn-block">{{ 'pay'|trans|capitalize }}</button>
        </form>


        {% else %}

            <h3>Something went wrong</h3>

        {% endif %}
    </div>
</div>

        <script>

            document.getElementById('decQuan').onclick = function () {
                var quan = document.getElementById('quan');
                if(quan.value <= 0) {
                    quan.value = 0;
                } else {
                    quan.value = quan - 1
                }
            }
            document.getElementById('incQuan').onclick = function () {
                var quan = document.getElementById('quan');
                if(quan.value >= 99) {
                    quan.value = 99;
                } else {
                    quan.value = quan + 1
                }
            }
        </script>

{% endif %}

{% endblock %}
